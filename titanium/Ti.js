define(["Ti/_","Ti/API","Ti/_/analytics","Ti/App","Ti/_/Evented","Ti/_/has","Ti/_/lang","Ti/_/ready","Ti/_/style","Ti/Buffer","Ti/Platform","Ti/UI","Ti/Locale","Ti/_/include"],function(_,API,analytics,App,Evented,has,lang,ready,style,Buffer,Platform,UI){function Empty(){}function escapeString(e){return('"'+e.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")}function shutdown(){unloaded||(unloaded=1,App.fireEvent("close"),analytics.add("ti.end","ti.end"))}var global=window,req=require,cfg=req.config,deployType=App.deployType,ver=cfg.ti.version,is=req.is,on=req.on,loaded,unloaded,showingError,waiting=[],Ti=lang.setObject("Ti",Evented,{constants:{buildDate:cfg.ti.buildDate,buildHash:cfg.ti.buildHash,version:ver},properties:{userAgent:function(){return navigator.userAgent}},createBuffer:function(e){return new Buffer(e)},include:function(e){"array"==typeof e||(e=[].concat(Array.prototype.slice.call(arguments,0))),e.forEach(function(e){require("Ti/_/include!"+e)})},deferStart:function(){if(!loaded){var e=Math.round(1e12*Math.random());return waiting.push(e),function(){var t=waiting.indexOf(e);~t&&waiting.splice(t,1),loaded=1,waiting.length||(has("ti-instrumentation")&&instrumentation.stopTest(instrumentation.systemLoadTimeTest),require(cfg.main||["app.js"]))}}API.warn("app.js already loaded!")}}),loadAppjs=Ti.deferStart();if(!has("object-defineproperty")){var odp=Object.defineProperty;Object.defineProperty=function defineProperty(e,t,i){if(!e||!is(e,"Object")&&!is(e,"Function")&&!is(e,"Window"))throw new TypeError("Object.defineProperty called on non-object: "+e);if(i=i||{},!i||!is(i,"Object")&&!is(i,"Function"))throw new TypeError("Property description must be an object: "+i);if(odp)try{return odp.call(Object,e,t,i)}catch(n){}var r=Object.prototype,o=function(e,t){return e.hasOwnProperty(t)},a=o(r,"__defineGetter__"),s=e.__proto__;if(o(i,"value"))a&&(e.__lookupGetter__(t)||e.__lookupSetter__(t))?(e.__proto__=r,delete e[t],e[t]=i.value,e.__proto__=s):e[t]=i.value;else{if(!a)throw new TypeError("Getters and setters can not be defined on this javascript engine");o(i,"get")&&defineGetter(e,t,i.get),o(i,"set")?defineSetter(e,t,i.set):e[t]=null}}}if(has("function-bind")||(Function.prototype.bind=function bind(e){var t=this,i=Array.prototype.slice,n=i.call(arguments,1),r=function(){var o,a=n.concat(i.call(arguments));return this instanceof r?(o=t.apply(this,a),Object(o)===o?o:this):t.apply(e,a)};return t.prototype&&(Empty.prototype=t.prototype,r.prototype=new Empty,Empty.prototype=null),r}),!has("js-btoa")){var tab="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",fromCharCode=String.fromCharCode;global.btoa=function(e){for(var t,i,n,r,o,a,s,l=[],c=0,u=e.length;u>c;)t=e.charCodeAt(c++),i=e.charCodeAt(c++),n=e.charCodeAt(c++),r=t>>2,o=(3&t)<<4|i>>4,a=(15&i)<<2|n>>6,s=63&n,isNaN(i)?a=s=64:isNaN(n)&&(s=64),l.push(tab.charAt(r)+tab.charAt(o)+tab.charAt(a)+tab.charAt(s));return l.join("")},global.atob=function(e){var t,i,n,r,o=[],a=0,s=e.length;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");s>a;)t=tab.indexOf(e.charAt(a++)),i=tab.indexOf(e.charAt(a++)),n=tab.indexOf(e.charAt(a++)),r=tab.indexOf(e.charAt(a++)),o.push(fromCharCode(t<<2|i>>4)),64!==n&&o.push(fromCharCode((15&i)<<4|n>>2)),64!==r&&o.push(fromCharCode((3&n)<<6|r));return o.join("")}}return has("json-stringify")||(JSON.parse=function(s){return eval("("+s+")")},JSON.stringify=function(e,t,i){function n(e,r,o){var a,s,l=typeof e,c=i?r+i:"",u=i?" ":"",d=i?"\n":"",h=[];if(t&&(e=t(o,e)),"number"===l)return isFinite(e)?e+"":"null";if(is(l,"Boolean"))return e+"";if(null===e)return"null";if(is(e,"String"))return escapeString(e);if("function"===l||"undefined"===l)return void 0;if(is(e.toJSON,"Function"))return n(e.toJSON(o),r,o);if(e instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(t,i,n){var r=e["getUTC"+i]()+(n?1:0);return 10>r?"0"+r:r});if(e.valueOf()!==e)return n(e.valueOf(),r,o);if(e instanceof Array){for(o=0,s=e.length;s>o;o++){var _=e[o];a=n(_,c,o),is(a,"String")||(a="null"),h.push(d+c+a)}return"["+h.join(",")+d+r+"]"}for(o in e){var f;if(is(o,"Number"))f='"'+o+'"';else{if(!is(o,"String"))continue;f=escapeString(o)}a=n(e[o],c,o),is(a,"String")&&h.push(d+c+f+":"+u+a)}return"{"+h.join(",")+d+r+"}"}return is(t,"String")&&(i=t,t=null),n(e,"","")}),Object.defineProperty(global,"Ti",{value:Ti,writable:!1}),Object.defineProperty(global,"Titanium",{value:Ti,writable:!1}),API.info("Appcelerator Titanium "+ver+" Mobile Web"),cfg.vendorPrefixes||(cfg.vendorPrefixes=["","Moz","Webkit","O","ms"]),Ti.parse=JSON.parse,Ti.stringify=JSON.stringify,on(global,"beforeunload",shutdown),on(global,"unload",shutdown),has("ti-show-errors")&&on(global,"error",function(e){function t(e,t,i,n){l.add(UI.createLabel({color:i,font:{fontSize:n,fontWeight:"bold"},height:t,left:10,right:10,textAlign:UI.TEXT_ALIGNMENT_CENTER,text:e}))}if(!showingError){showingError=1;var i,n,r=e.filename||"",o=r.match(/:\/\/.+(\/.*)/),a=o?o[1]:e.filename,s=e.lineno,l=UI.createWindow({backgroundColor:"#f00",top:"100%",height:"100%",layout:UI._LAYOUT_CONSTRAINING_VERTICAL});t("Application Error","15%","#0f0","24pt"),t((e.message||"Unknown error").trim()+(a&&"undefined"!==a?" at "+a:"")+(s?" (line "+s+")":""),"45%","#fff","16pt"),l.add(i=UI.createView({height:"12%"})),i.add(n=UI.createButton({title:"Dismiss"})),l.addEventListener("close",function(){l.destroy()}),n.addEventListener("singletap",function(){l.animate({duration:500,top:"100%"},function(){l.close(),showingError=0})}),t("Error messages will only be displayed during development. When your app is packaged for final distribution, no error screen will appear. Test your code!","28%","#000","10pt"),on.once(l,"postlayout",function(){setTimeout(function(){l.animate({duration:500,top:0},function(){l.top=0,l.height="100%"})},100)}),l.open()}}),ready(function(){style.set(document.body,{margin:0,padding:0}),App.analytics&&(null===localStorage.getItem("ti:enrolled")&&(analytics.add("ti.enroll","ti.enroll",{app_name:App.name,oscpu:1,mac_addr:null,deploytype:deployType,ostype:Platform.osname,osarch:null,app_id:App.id,platform:Platform.name,model:Platform.model}),localStorage.setItem("ti:enrolled",!0)),analytics.add("ti.start","ti.start",{tz:(new Date).getTimezoneOffset(),deploytype:deployType,os:Platform.osname,osver:Platform.ostype,version:cfg.ti.version,platform:Platform.name,model:Platform.model,un:null,app_version:App.version,nettype:null}),analytics.send()),setTimeout(loadAppjs,1)}),Ti});