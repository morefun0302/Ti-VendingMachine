define(["Ti/_/declare","Ti/_/UI/FontWidget","Ti/_/dom","Ti/_/css","Ti/_/style","Ti/_/lang","Ti/Locale","Ti/UI"],function(e,t,i,n,r,o,a,s){var c=r.set,l=i.unitize,u=2,d={post:"_setText"};return e("Ti.UI.Label",t,{constructor:function(){this._add(this._textContainer=s.createView({width:s.INHERIT,height:s.SIZE,center:{y:"50%"}}));var e=this,t=this._textContainerDomNode=this._textContainer.domNode;e._textContainer._getContentSize=function(i){var n=e._textContainerDomNode.innerHTML,r=e._measureText(n,t,e._hasSizeWidth()?void 0:i);return{width:r.width,height:r.height}},this._addStyleableDomNode(t),this.wordWrap=!0},_defaultWidth:s.SIZE,_defaultHeight:s.SIZE,_getText:function(){var e,t,i=0,n=0,r=a._getString(this.textid,this.text);if(void 0===r)return"";for(r+="";r.length>n;)if("	"===r[n]){var o="",s=u-t%u;for(e=0;s>e;e++)o+="&nbsp;";r=r.substring(0,n)+o+r.substring(n+1),n+=o.length,t+=s}else"\n"===r[n]?(r=r.substring(0,n)+"<br/>"+r.substring(n+1),n+=5,i=n,t=0):(n++,t++);return r.match(/<br\/>$/)&&(r+="&nbsp;"),r},_setText:function(){this._textContainerDomNode.innerHTML=this._getText(),this._triggerLayout()},_setTextShadow:function(){var e=this.shadowColor&&""!==this.shadowColor?this.shadowColor:void 0;c(this._textContainerDomNode,"textShadow",this.shadowOffset||e?(this.shadowOffset?l(this.shadowOffset.x)+" "+l(this.shadowOffset.y):"0px 0px")+" 0.1em "+o.val(e,"black"):"")},properties:{ellipsize:{set:function(e){return c(this._textContainerDomNode,"textOverflow",e?"ellipsis":"clip"),e},value:!0},html:{set:function(e){return this._textContainerDomNode.innerHTML=e,this._hasSizeDimensions()&&this._triggerLayout(),e}},shadowColor:{post:function(){this._setTextShadow()}},shadowOffset:{post:function(){this._setTextShadow()}},text:d,textAlign:{set:function(e){return c(this._textContainerDomNode,"textAlign",/(center|right)/.test(e)?e:"left"),e}},textid:d,wordWrap:{set:function(e){return c(this._textContainerDomNode,"whiteSpace",e?"normal":"nowrap"),e}},verticalAlign:{set:function(e){var t,i,n=this.center||{},r=this._textContainer;switch(e){case s.TEXT_VERTICAL_ALIGNMENT_TOP:t=0;break;case s.TEXT_VERTICAL_ALIGNMENT_CENTER:n.y="50%";break;case s.TEXT_VERTICAL_ALIGNMENT_BOTTOM:i=0}return r.top=t,r.center=n,r.bottom=i,e},value:s.TEXT_VERTICAL_ALIGNMENT_CENTER}}})});