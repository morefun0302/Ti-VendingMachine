define(["Ti/_/Evented","Ti/_/lang","Ti/UI","Ti/_/ready"],function(e,t,i,n){function r(){var e=!!(window.innerWidth&&window.innerWidth>window.innerHeight);return d.constants.__values__.orientation=e?i.LANDSCAPE_LEFT:i.PORTRAIT,d.constants.__values__.landscape=e,d.constants.__values__.portrait=!e,d.orientation}function o(e){var t=null,n=Math.abs(e.beta||0|e.y),r=Math.abs(e.gamma||0|e.x);5>n&&r>170&&(t=i.FACE_DOWN),5>n&&5>r&&(t=i.FACE_UP),n>50&&0>n&&l!=t&&(t=i.UPSIDE_PORTRAIT),null!==t&&l!==t&&d.fireEvent("orientationchange",{orientation:l=t,source:e.source})}var a=window,s=require.on,l=null,c=Date.now(),u={},d=t.setObject("Ti.Gesture",e,{_updateOrientation:function(){r(),l!==d.orientation&&d.fireEvent("orientationchange",{orientation:l=d.orientation})},isLandscape:function(){return d.landscape},isPortrait:function(){return d.portrait},constants:{portrait:!1,landscape:!1,orientation:i.UNKNOWN}});return n(function(){r()}),s(a,"MozOrientation",o),s(a,"deviceorientation",o),s(a,"devicemotion",function(e){var t,i,n,r,o=e.acceleration||e.accelerationIncludingGravity,a=o&&{x:o.x,y:o.y,z:o.z,source:e.source};a&&(void 0!==u.x&&(t=Math.abs(u.x-a.x)>10,i=Math.abs(u.y-a.y)>10,n=Math.abs(u.z-a.z)>10,(t&&(i||n)||i&&n)&&(r=Date.now(),(a.timestamp=r-c)>300&&(c=r,d.fireEvent("shake",a)))),u=a)}),d});