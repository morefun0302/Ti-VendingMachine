define(["Ti/_/declare","Ti/_/lang"],function(t,e){function i(t){if(n&&2==n.length&&2==t.touches.length){var e=Math.sqrt(Math.pow(t.touches[0].clientX-t.touches[1].clientX,2)+Math.pow(t.touches[0].clientY-t.touches[1].clientY,2)),i=0,r=Date.now();return a&&(i=Math.abs(a/o-e/o)/((r-s)/1e3)),a=e,s=r,{pinch:[{scale:e/o,velocity:i}]}}}var n=null,r=null,o=null,a=null,s=null,c=100;return e.setObject("Ti._.Gestures.Pinch",{processTouchStartEvent:function(t){var e=t.changedTouches[0].clientX,i=t.changedTouches[0].clientY,a=t.touches.length,s=t.changedTouches.length;1==a&&1==s?(n=[{x:e,y:i}],r=setTimeout(function(){n=null},c)):2==a&&1==s?(clearTimeout(r),n&&(n.push({x:e,y:i}),o=Math.sqrt(Math.pow(n[0].x-n[1].x,2)+Math.pow(n[0].y-n[1].y,2)))):2==a&&2==s?(n=[{x:e,y:i},{x:t.changedTouches[1].clientX,y:t.changedTouches[1].clientY}],o=Math.sqrt(Math.pow(n[0].x-n[1].x,2)+Math.pow(n[0].y-n[1].y,2))):n=null},processTouchEndEvent:function(t){var e=i(t);return n=null,e},processTouchMoveEvent:function(t){return i(t)},processTouchCancelEvent:function(){n=null}})});