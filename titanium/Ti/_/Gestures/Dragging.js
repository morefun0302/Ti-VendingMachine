define(["Ti/_/declare","Ti/_/lang"],function(t,e){function i(t){var e;return r?(e=n(t),r=null,{draggingcancel:e}):void 0}function n(t){var e=t.changedTouches[0].clientX,i=t.changedTouches[0].clientY,n=e-r.x,o=i-r.y;return[{x:e,y:i,distanceX:n,distanceY:o,distance:Math.sqrt(Math.pow(n,2)+Math.pow(o,2))}]}var r,o=25;return e.setObject("Ti._.Gestures.Drag",{processTouchStartEvent:function(t){if(1==t.touches.length&&1==t.changedTouches.length){var e,o;return r={x:e=t.changedTouches[0].clientX,y:o=t.changedTouches[0].clientY},{draggingstart:n(t)}}return r?i(t):void 0},processTouchEndEvent:function(t){if(r){var e,a=Math.sqrt(Math.pow(t.changedTouches[0].clientX-r.x,2)+Math.pow(t.changedTouches[0].clientY-r.y,2));return 0===t.touches.length&&1===t.changedTouches.length&&a>o?(e=n(t),r=null,{draggingend:e}):i(t)}},processTouchMoveEvent:function(t){return r?1==t.touches.length&&1==t.changedTouches.length?{dragging:n(t)}:i(t):void 0},processTouchCancelEvent:function(t){return r&&i(t)}})});