define(["Ti/_/declare","Ti/UI","Ti/UI/View"],function(t,e,i){var n=[];return t("Ti._.UI.SuperView",i,{destroy:function(){this.close(),i.prototype.destroy.apply(this,arguments)},open:function(){if(!this._opened){this._opened=1,e._addWindow(this,1).show();var t=n.length;t&&n[t-1]._handleBlurEvent(2),n.push(this),this.fireEvent("open"),this._handleFocusEvent()}},close:function(){if(this.tab)this.tab.close(this);else if(this._opened){var t=n.indexOf(this),i=t===n.length-1;if(e._removeWindow(this),~t&&(i&&this._handleBlurEvent(1),n.splice(t,1)),this.fireEvent("close"),i){for(t=n.length-1;t>=0&&!n[t]._opened;t--);t>=0&&n[t]._handleFocusEvent()}this._opened=0}},_handleFocusEvent:function(){this.fireEvent("focus")},_handleBlurEvent:function(){this.fireEvent("blur")}})});